name: CI - Kiá»ƒm tra Cháº¥t lÆ°á»£ng Code

# Workflow nÃ y sáº½ cháº¡y khi cÃ³ push lÃªn nhÃ¡nh 'main' hoáº·c 'master'
on:
  push:
    branches: ["main", "master"]

jobs:
  # JOB CHÃNH: CHáº Y BÃ€I KIá»‚M THá»¬ (CI)
  # Äáº£m báº£o táº¥t cáº£ cÃ¡c service hoáº¡t Ä‘á»™ng Ä‘Ãºng trÆ°á»›c khi tiáº¿n hÃ nh cÃ¡c bÆ°á»›c khÃ¡c
  run-tests:
    name: ğŸ§ª Install & Test All Services
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js 18
        uses: actions/setup-node@v4
        with:
          node-version: 18

      # CÃ i Ä‘áº·t dependencies cho tá»«ng service
      - name: Install dependencies for all services
        run: |
          echo "ğŸ“¦ Installing dependencies for auth service..."
          cd auth && npm install && cd ..
          echo "ğŸ“¦ Installing dependencies for product service..."
          cd product && npm install && cd ..
          # Báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c service khÃ¡c vÃ o Ä‘Ã¢y náº¿u cáº§n

      # Cháº¡y cÃ¡c bÃ i kiá»ƒm thá»­
      - name: Run tests for each service
        run: |
          echo "ğŸ§ª Testing auth service..."
          cd auth && npm test && cd ..
          echo "ğŸ§ª Testing product service..."
          cd product && npm test && cd ..
          # Cháº¡y test cho cÃ¡c service khÃ¡c...
          echo "ğŸ‰ All tests passed!"
